<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>WLED installation</title>
  <style>
  a { color: #0000EE; cursor: pointer; text-decoration: underline;}
  div {padding-bottom: 10px;}
 .select-wrapper {
    position: relative;
    width: 500px;
  }
 .button-wrapper {
   position: relative;
   width: 500px;
 }
body {
  background-color: #66CCFF;
  font-family: 'Open Sans', sans-serif;
  font-size: 16px;
}

#lang {width: 500px;}
#software_version {width: 500px;}
select, button {
  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
  background-color: #3399FF;
  border: none;
  border-radius: 3px;
  box-shadow: 2px 2px 5px 1px rgba(0,0,0,.3);
  color: #fff;
  cursor: pointer;
  font-family: 'Open Sans', sans-serif;
  font-size: 16px;
  height: 40px;
  outline: none;
  padding-left: 10px;
}

button {width: 500px;}

select option {
  color: #FFF;
}
.select-wrapper::before {
  content: "\1F853";
  font-size: 20px;
  position: absolute;
  right: 15px;
  top: 10px;
  color: #fff;
  pointer-events: none;
}
select::-ms-expand {
  display: none;
}
select:focus::-ms-value {
  background-color: transparent;
}
  </style>
  <script
    type="module"
    src="https://unpkg.com/esp-web-tools@7.3.1/dist/web/install-button.js?module"
  ></script>
</head>
<body>
  <h2>WLED Software Installation</h2>
  <h4 id="L17">(inoffizieller Installer mit einem erweiterten Funktionsumfang)</h4>
  <div>Language/Sprache:
  <div class="select-wrapper">
  <select id="lang" onchange="LangChanged();">
        <option value="0">Deutsch</option>
        <option value="1">English</option>
  </select></div></div>
  <div id="FullContainer">
      <ol>
          <li><span id="L01">Schliessen Sie Ihr ESP8266 / ESP32 Board an USB an.</span></li>
          <div></div>
          <li><span id="L02">Wählen Sie den Board-Typ aus</span></li>
          <div></div>
          <li><span id="L03">Klicken Sie auf "Installieren" und wählen dann den korrekten COM-Port aus. </span><a onclick="NoComPortHelp()"><span id="L04">Kein Board wurde gefunden?</span></a></li>
          <div id="comporthelp"></div>
          <li><span id="L05">Klicken Sie auf "Install WLED". Die Installation beginnt. Sollte nach einiger Zeit die Installation beim "Wrapping Up" stehen bleiben, können es es unterbrechen. Die SW ist dann trotzdem i.O. installiert.</span></li>
      </ol><br>
      <div class="container inst-button">
          <div><span id="L11">Board Typ: </span>
          <div class="select-wrapper">
          <select id="software_version" onchange="selectSoftware()">
		  <optgroup label="Standart version 13.3">
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_3_WLED_0.13.3_ESP01.json">ESP8266 (1MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_3_WLED_0.13.3_ESP02.json">ESP8266 (2MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_3_WLED_0.13.3_ESP32.json">ESP32 (4MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_3_WLED_0.13.3_ESP32_APA102FIX2MHZ.json">ESP32 (4MB Flash, APA102 2MHz)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_3_WLED_0.13.3_ESP32_Ethernet.json">ESP32 (4MB Flash, Ethernet)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_3_WLED_0.13.3_ESP8266.json">ESP8266 (4MB Flash)</option>
<optgroup label="Standart version 13.1">
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_1_ESP32_4MB_13.1_APA102FIX2MHZ.json">ESP32 (4MB Flash, APA102 2MHz)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_1_WLED_0.13.1_ESP01.json">ESP8266 (1MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_1_WLED_0.13.1_ESP02.json">ESP8266 (2MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_1_WLED_0.13.1_ESP32.json">ESP32 (4MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_1_WLED_0.13.1_ESP32_Ethernet.json">ESP32 (4MB Flash, Ethernet)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_1_WLED_0.13.1_ESP8266.json">ESP8266 (4MB Flash)</option>
<optgroup label="Standart version 13.0 beta 6">
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_0_beta_6_ESP32_4MB.json">ESP32 (4MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_0_beta_6_ESP8266_1MB.json">ESP8266 (1MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_0_beta_6_ESP8266_2MB.json">ESP8266 (2MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Standart_version_13_0_beta_6_ESP8266_4MB.json">ESP8266 (4MB Flash)</option>
<optgroup label="Sound reactive version 13.2">
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_2_SR_ESP32_4MB_13.2.json">ESP32 (4MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_2_SR_ESP32_4MB_13.2_AHI.json">ESP32 (4MB Flash, APA102 2MHz + Alexa/Hue/Infrared enabled)</option>
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_2_SR_ESP32_4MB_13.2_AHI_v41.json">ESP32 (4MB Flash, APA102 2MHz + Alexa/Hue/Infrared enabled, LEDPIN=16, DigMic = Generic I2S)</option>
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_2_SR_ESP32_4MB_13.2_ETH.json">ESP32 (4MB Flash, Ethernet)</option>
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_2_SR_ESP32_4MB_13.2_ETH_AHI.json">ESP32 (4MB Flash, Ethernet, APA102 2MHz + Alexa/Hue/Infrared enabled)</option>
<optgroup label="Sound reactive version 13.0 beta 6">
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_0_beta_6_SR_ESP32_4MB.json">ESP32 (4MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_0_beta_6_SR_ESP32_4MB_ETH.json">ESP32 (4MB Flash, Ethernet)</option>
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_0_beta_6_SR_ESP8266_2MB.json">ESP8266 (2MB Flash)</option>
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_0_beta_6_SR_ESP8266_4MB.json">ESP8266 (4MB Flash)</option>
<optgroup label="Sound reactive version 13.0 beta 3">
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_0_beta_3_SR_ESP8266_2MB_13b3_withAlexa.json">ESP8266 (2MB Flash, Alexa enabled)</option>
<option data-manifest_file="/manifest_dir/manifest_Sound_reactive_version_13_0_beta_3_SR_ESP8266_4MB_13b3_withAlexa.json">ESP8266 (4MB Flash, Alexa enabled)</option>

		  </select>
          </div>
          </div><br>
          <esp-web-install-button id="install_btn" manifest="/cangw/manifest.json" >
            <button slot="activate"><span id="L09">Installieren<span></button>
          </esp-web-install-button><br><br>
      </div>
      
  </div>
  <hr>
        <div>
        <h3 id="L15">Nützliche Informationen:</h3>
        <ul>
          <li><span id="L20">Link zu verwendeten .bin Dateien: <a href="https://github.com/wled-install/wled-install.github.io/tree/gh-pages/fw">auf Github</a></span></li>
          <li><span id="L12">WLED Wiki: <a href="https://kno.wled.ge">https://kno.wled.ge</a></span></li>
          <li><span id="L14">DIY WLED boards: </span><a href="https://github.com/wladwnt/wled">Github</a></li>
          <li><span id="L13">Professionelle WLED Boards: <a href="https://shop.myhome-control.de">MyHome-Control Shop</a></span></li>
          <li><span id="L16">WLED power calculator: <a href="https://wled-calculator.github.io">https://wled-calculator.github.io</a></span></li>
        </ul>
      </div>
   <hr><hr>
   <a onclick="ShowImprint()"><span id="L18">Impressum</span></a>
   <div id="imprint"></div>
   <br>
   <a onclick="ShowDataPrivacy()"><span id="L19">Datenschutzerklärung</span></a>
   <div id="dataprivacy"></div>
        
<script>
function LangChanged() {
    if(document.getElementById('lang').selectedIndex==0) {
        if(document.getElementById('L10')) document.getElementById('L10').innerHTML = "Leider wird Ihr Browser aktuell nicht unterstützt!<br>Bitte versuchen Sie mit Google Chrome (für Desktop) oder Microsoft Edge.";
        if(document.getElementById('L01')) document.getElementById('L01').innerHTML = "Schliessen Sie Ihr ESP8266 / ESP32 Board an USB an.";
        if(document.getElementById('L02')) document.getElementById('L02').innerHTML = "Wählen Sie den Board-Typ aus";
        if(document.getElementById('L03')) document.getElementById('L03').innerHTML = "Klicken Sie auf \"Installieren\" und wählen dann den korrekten COM-Port aus. ";
        if(document.getElementById('L04')) document.getElementById('L04').innerHTML = "Kein Board wurde gefunden?";
        if(document.getElementById('L05')) document.getElementById('L05').innerHTML = "Klicken Sie auf \"Install WLED\". Die Installation beginnt. Sollte nach einiger Zeit die Installation beim \"Wrapping Up\" stehen bleiben, können sie es unterbrechen. Die SW ist dann trotzdem i.O. installiert";
        if(document.getElementById('L09')) document.getElementById('L09').innerHTML = "Installieren";
        if(document.getElementById('L11')) document.getElementById('L11').innerHTML = "Board Typ: ";
        if(document.getElementById('L13')) document.getElementById('L13').innerHTML = 'Professionelle WLED Boards: <a href="https://shop.myhome-control.de">MyHome-Control Shop</a>';
        if(document.getElementById('L15')) document.getElementById('L15').innerHTML = "Nützliche Informationen:";
        if(document.getElementById('L16')) document.getElementById('L16').innerHTML = 'WLED Leistung Rechner: <a href="https://wled-calculator.github.io">https://wled-calculator.github.io</a>';
        if(document.getElementById('L17')) document.getElementById('L17').innerHTML = '(inoffizieller Installer mit einem erweiterten Funktionsumfang)';
        if(document.getElementById('L18')) document.getElementById('L18').innerHTML = 'Impressum';
        if(document.getElementById('L19')) document.getElementById('L19').innerHTML = 'Datenschutzerklärung';
        if(document.getElementById('L20')) document.getElementById('L20').innerHTML = 'Link zu verwendeten .bin Dateien: <a href="https://github.com/wled-install/wled-install.github.io/tree/gh-pages/fw">auf Github</a>';
      
    } else {
        if(document.getElementById('L10')) document.getElementById('L10').innerHTML = "Unfortunately your browser is not yet supported!<br>Please try on Chrome (for Desktop) or Microsoft Edge.";
        if(document.getElementById('L01')) document.getElementById('L01').innerHTML = "Connect your ESP8266 / ESP32 board via USB port";
        if(document.getElementById('L02')) document.getElementById('L02').innerHTML = "Select type of your board";
        if(document.getElementById('L03')) document.getElementById('L03').innerHTML = "Click on \"Install\" and select the correct COM port. ";
        if(document.getElementById('L04')) document.getElementById('L04').innerHTML = "No board found?";
        if(document.getElementById('L05')) document.getElementById('L05').innerHTML = "Click on \"Install WLED\". If after some time the installation stops at \"wrapping up\", you can interrupt it. The SW is then still installed correctly.";
        if(document.getElementById('L09')) document.getElementById('L09').innerHTML = "Install";
        if(document.getElementById('L11')) document.getElementById('L11').innerHTML = "Board type: ";
        if(document.getElementById('L13')) document.getElementById('L13').innerHTML = 'Professional WLED boards: <a href="https://wled.shop">WLED Shop</a>';
        if(document.getElementById('L15')) document.getElementById('L15').innerHTML = "Useful web pages:";
        if(document.getElementById('L16')) document.getElementById('L16').innerHTML = 'WLED power calculator: <a href="https://wled-calculator.github.io">https://wled-calculator.github.io</a>';
        if(document.getElementById('L17')) document.getElementById('L17').innerHTML = '(unofficial installer with an extended functionality)';
        if(document.getElementById('L18')) document.getElementById('L18').innerHTML = 'Imprint';
        if(document.getElementById('L19')) document.getElementById('L19').innerHTML = 'Data privacy';
        if(document.getElementById('L20')) document.getElementById('L20').innerHTML = 'Link to .bin files used: <a href="https://github.com/wled-install/wled-install.github.io/tree/gh-pages/fw">on Github</a>';
    }
    document.getElementById('comporthelp').innerHTML ="";
}

function selectSoftware() {
    var selected = document.getElementById('software_version');
    var manifest_file = selected.options[selected.selectedIndex].dataset.manifest_file;
    document.getElementById('install_btn').setAttribute('manifest',manifest_file);
}
  
function ShowImprint() {
    if(document.getElementById('lang').selectedIndex==0) {
        document.getElementById('imprint').innerHTML = "<br><h3>Impressum</h3>Angaben gemäß § 5 TMG:<br>Verantwortlicher: Wladislaw Waag<br>Adresse: Wasserburger Landstr. 29, 81825 München, Deutschland<br>Kontakt: +49 (0) 176 47 11 5206, info@myhome-control.de<br><br>EU-Streitschlichtung: Die Europäische Kommission stellt eine Plattform zur Online-Streitbeilegung (OS) bereit: <a href='https://ec.europa.eu/consumers/odr/' target='_blank'>https://ec.europa.eu/consumers/odr/</a>.<br><br>Verbraucherstreitbeilegung/Universalschlichtungsstelle: Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen.";
    } else {
        document.getElementById('imprint').innerHTML = "<br><h3>Imprint</h3>Information according to § 5 TMG:<br>Responsible: Wladislaw Waag<br>Address: Wasserburger Landstr. 29, 81825 Munich, Germany<br>Contact: +49 176 47 11 5206, info@myhome-control.de<br><br>EU dispute settlement: The European Commission provides a platform for online dispute resolution (ODR): <a href='https://ec.europa.eu/consumers/odr/' target='_blank'>https://ec.europa.eu/consumers/odr/</a>.<br><br>Consumer dispute settlement / universal arbitration board: We are neither willing nor obliged to participate in dispute settlement proceedings before a consumer arbitration board.";
    }
}
  
function ShowDataPrivacy() {
    if(document.getElementById('lang').selectedIndex==0) {
        document.getElementById('dataprivacy').innerHTML = "<br><h3>Datenschutzerklärung</h3>Der betreiber dieser Webseite (https://wled-install.github.io) sammelt und verarbeitet keinerlei personenbezogenen Daten der Nutzer dierser Webseite. Diese Seite wird jedoch im Rahmen von 'Github Pages' gehostet und betrieben. Es ist möglich und wahrscheinlich, dass Github die personenbezogenen Daten sammelt und verarbeitet. Das betrifft dann auch die Besucher der Webseite wled-installer.github.io. Ich habe aber keinerlei Einfluss darauf. Bitte lesen Sie dazu die Datenschutzerklärung von Github: <a href='https://docs.github.com/en/github/site-policy/github-privacy-statement' target='_blank'>https://docs.github.com/en/github/site-policy/github-privacy-statement</a><br><br>Unsere Webseite enthält Links zu externen Webseiten Dritter, auf deren Inhalte wir keinen Einfluss haben. Für diese fremden Inhalte können wir keine Gewähr und keine Haftung übernehmen. Für die Inhalte der verlinkten Seiten ist immer der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf mögliche Rechtsverstöße überprüft. Rechtswidrige Inhalte waren dabei nicht erkennbar. Sollten uns Rechtsverletzungen bekannt werden, werden wir die entsprechende Verlinkung umgehend entfernen.";
    } else {
        document.getElementById('dataprivacy').innerHTML = "<br><h3>Data privacy</h3>The operator of this website (https://wled-install.github.io) does not collect and process any personal data of the users of this website. However, this page is hosted and operated as part of 'Github Pages'. It is possible and probable that Github collects and processes personal data, which then also affects visitors of the wled-installer.github.io web page. But I have no influence on it. Please read the Github privacy statement: <a href='https://docs.github.com/en/github/site-policy/github-privacy-statement' target='_blank'>https://docs.github.com/en/github/site-policy/github-privacy-statement</a><br><br>Our website contains links to external websites over which we have no control. We cannot accept any liability for this third-party content. The respective provider or operator of the pages is always responsible for the content of the linked pages. The linked pages were checked for possible legal violations at the time of linking. Illegal content was not recognizable at that time. If we become aware of any legal violations, we will remove the relevant link immediately.";
    }
}

function NoComPortHelp() {
    document.getElementById('L04').innerHTML = "";
    if(document.getElementById('lang').selectedIndex==0) {
        document.getElementById('comporthelp').innerHTML = "<br>Ist Dein USB Kabel geeignet für Datentransfer ?<br><br>Vielelicht fehlt der USB Treiber für Dein Board. Die meisten Boards verwenden einen von diesen:<br>- <a href=\"https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers\" target=\"_blank\">CP210x (quadratischer Chip)</a><br>-  <a href=\"http://www.wch-ic.com/downloads/CH341SER_EXE.html\" target=\"_blank\">CH34x (Rechteck Chip)</a><br><br>";
    } else {
        document.getElementById('comporthelp').innerHTML = "<br>Check if your USB cable supports data transfer.<br><br>Eventually you have to install the drivers for your board.<br>Here are drivers commonly used in ESP32 boards:<br>- <a href=\"https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers\" target=\"_blank\">CP210x (small square chip)</a><br>- <a href=\"http://www.wch-ic.com/downloads/CH341SER_EXE.html\" target=\"_blank\">CH34x (rectangular chip)</a><br><br>";
    }
}

window.onload = function () {
    if (document.getElementById('install_btn').hasAttribute('install-unsupported')) {
        if(document.getElementById('lang').selectedIndex==0) {
            document.getElementById('FullContainer').innerHTML = "<span id=\"L10\">Leider wird Ihr Browser aktuell nicht unterstützt!<br>Bitte versuchen Sie mit Google Chrome (für Desktop) oder Microsoft Edge.</span><br>"; 
        } else {
            document.getElementById('FullContainer').innerHTML = "<span id=\"L10\">Unfortunately your browser is not yet supported!<br>Please try on Chrome (for Desktop) or Microsoft Edge.</span><br>";
        }
    } else {
        selectSoftware();
    }
};
</script>
</body>
</html>